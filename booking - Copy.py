import undetected_chromedriver.v2 as uc
from mail_gw import Account
import  re
from selenium import webdriver
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC
from selenium.webdriver.support.ui import Select
from selenium.webdriver.common.keys import Keys
from selenium.webdriver.common.desired_capabilities import DesiredCapabilities
from selenium.common.exceptions import NoSuchElementException
from selenium.common.exceptions import WebDriverException
from selenium.common.exceptions import TimeoutException
import string
import random
import time
import names
import requests
import random
import string
import time
import sys
import re
import os



def convertTuple(tup):

    # initialize an empty string
    strc = ''
    c = len(tup)

    for item in range(c):
        strc = strc + strc.join(tup[item])

    return strc





def check():
    try:
        browser.find_element(By.XPATH,'//input[@aria-label="Enter phone number"]')
    except NoSuchElementException:
        return False
    return True




#options.add_experimental_option("mobileEmulation", mobile_emulation)
count=1
recount=0
total=1




while (1):
      try:
        while (1):
            numb = "0123456789"

            url = 'https://account.booking.com/register'

            fnumbers = ["1958661276", "1958664089", "1958540958", "1958662632", "1958665270", "1958543297",
                        "1958663948",
                        "1958541426", "1958663426", "1941345642", "1958651595", "1958663806", "1958540719",
                        "1958661501",
                        "1958664239", "1958666778", "1958662689", "1958665208", "1958651955", "1958663521",
                        "1958652164",
                        "1958661697", "1958664434", "1958669499", "1958663081", "1963929059", "1958651805",
                        "1958663812",
                        "1958652636", "1958661817", "1958664485", "1958541675", "1958546642", "1931488114",
                        "1958662027",
                        "1958664833", "1958549143", "1958663037", "1971810682", "1958651708", "1958663721",
                        "1958540026",
                        "1958662699", "1952571201", "1958541833", "1958546919", "1948178411", "1958661473",
                        "1958664211",
                        "1958667408", "1958663401", "1937216913", "1958661431", "1958664169", "1958662870",
                        "1932579589",
                        "1958542862", "1958663694", "1958541388", "1958663061", "1919750576", "1976987089",
                        "1958663698",
                        "1958652906", "1958661948", "1958664612", "1958540504", "1958662677", "1958665254",
                        "1958541798",
                        "1958663749", "1958652369", "1958650550", "1958661976", "1958662766", "1958663394",
                        "1958663595",
                        "1958664117", "1958664599", "1958544681", "1958546184", "1958653078", "1958540606",
                        "1958658025",
                        "1958661391", "1958664137", "1958541271", "1958662684", "1958665370", "1958543246",
                        "1958663996",
                        "1958666604", "1958663476", "1929863663", "1958650014", "1958663854", "1958540807",
                        "1958661549",
                        "1958664287", "1958667073", "1958662737", "1958665287", "1958651751", "1958663569",
                        "1958652249",
                        "1958661810", "1958664482", "1958550229", "1958663132", "1955790038", "1958651703",
                        "1958663860",
                        "1958652941", "1958661917", "1958664533", "1946368958", "1958546704", "1948504594",
                        "1958662090",
                        "1958664882", "1958542034", "1958663086", "1947849630", "1958651402", "1958663769",
                        "1958540116",
                        "1958662747", "1951457173", "1958665325", "1958546971", "1958544782", "1958661521",
                        "1958664259",
                        "1958669121", "1958663450", "1948557309", "1958661479", "1958664217", "1958662930",
                        "1962570313",
                        "1958651158", "1958663742", "1958541464", "1958663109", "1960795811", "1958651772",
                        "1958663746",
                        "1958652977", "1958662000", "1958664813", "1958540596", "1958662725", "1958665357",
                        "1958541747",
                        "1958663797", "1958652522", "1958650335", "1958661992", "1958662769", "1958663402",
                        "1958663597",
                        "1958664118", "1958664603", "1958544682", "1958546211", "1958653126", "1958540621",
                        "1958666010",
                        "1958661447", "1958664185", "1958541499", "1958662732", "1959456633", "1958665870",
                        "1958664044",
                        "1958668256", "1958546631", "1952525534", "1958543503", "1958663902", "1958541040",
                        "1958661597",
                        "1958664335", "1958667522", "1958662788", "1958665375", "1958650833", "1958663617",
                        "1958652402",
                        "1958661914", "1958664530", "1958551395", "1958663182", "1963928987", "1958651652",
                        "1958663908",
                        "1958653017", "1958661968", "1958664581", "1945089278", "1958546769", "1966469578",
                        "1958662258",
                        "1958664930", "1958541779", "1958663138", "1963928610", "1958651096", "1958663817",
                        "1958540468",
                        "1958662799", "1935262691", "1958660011", "1958547023", "1958544864", "1958661569",
                        "1958664307",
                        "1958670034", "1958663499", "1973693553", "1958661527", "1958664265", "1958663009",
                        "1945088976",
                        "1958650903", "1958663790", "1958657349", "1958663162", "1960817032", "1958650497",
                        "1958663794",
                        "1958540246", "1958662064", "1958664862", "1958540678", "1958662776", "1954575270",
                        "1958651216",
                        "1958663845", "1958652600", "1958650091", "1958661994", "1958662802", "1958663403",
                        "1958663600",
                        "1958664119", "1958664606", "1958544731", "1958546212", "1958653153", "1958540622",
                        "1958666011",
                        "1401791917", "1916889755", "1920413837", "1921345577", "1923334295", "1924289356",
                        "1924307128",
                        "1927157292", "1927598291", "1928192905", "1928194437", "1928658268", "1930929385",
                        "1931959044",
                        "1932791385", "1933056671", "1933618314", "1933622795", "1933859005", "1934971022",
                        "1935143103",
                        "1935723616", "1937358241", "1937518530", "1938726556", "1938730391", "1939776273",
                        "1940546179",
                        "1942796257", "1943217727", "1944021501", "1944085137", "1944967363", "1945089107",
                        "1946188839",
                        "1947331765", "1948387863", "1948412781", "1948642997", "1948766384", "1948949081",
                        "1952856047",
                        "1954571900", "1957535524", "1960453409", "1970652359", "1975698537", "1975846294",
                        "1976038630",
                        "1976460618", "1977508523", "1984931727", "1994856942", "1999561479", "1999597042",
                        "1958544372",
                        "1958544676", "1958544753", "1958544835", "1958544912", "1958544988", "1958545064",
                        "1958545140",
                        "1958545216", "1958545292", "1958545368", "1958545444", "1958545520", "1958545597",
                        "1958545673",
                        "1958545749", "1958545825", "1958545902", "1958545978", "1958546054", "1958546130",
                        "1958546206",
                        "1958546282", "1958546358", "1958546434", "1958546510", "1958546589", "1958652066",
                        "1958652146",
                        "1958652231", "1958652308", "1958652384", "1958652460", "1958652537", "1958652615",
                        "1958652691",
                        "1958652767", "1958652844", "1958652920", "1958652996", "1958653072", "1958653148",
                        "1958540082",
                        "1958540173", "1958540262", "1958540345", "1958540439", "1958540527", "1958540616",
                        "1958540700",
                        "1958540788", "1958540871", "1958540948", "1958541025", "1958541106", "1958541184",
                        "1958541261",
                        "1958541337", "1958541413", "1958541489", "1958541566", "1958654301", "1958656123",
                        "1958657565",
                        "1958666001", "1958666141", "1958666282", "1958666437", "1958666574", "1958666742",
                        "1958666894",
                        "1958667048", "1958667186", "1958667348", "1958667490", "1958667633", "1958667789",
                        "1958667935",
                        "1958668074", "1958668228", "1958668387", "1958668525", "1958668692", "1958668832",
                        "1958668981",
                        "1958669244", "1958669454", "1958669659", "1958669880", "1958670152", "1958670361",
                        "1958670553",
                        "1958670792", "1958549824", "1958549952", "1958550074", "1958550202", "1958550333",
                        "1958550453",
                        "1958550581", "1958550705", "1958550829", "1958550946", "1958551077", "1958551203",
                        "1958551353",
                        "1958551499", "1958551626", "1958551764", "1401791964", "1400413201", "1911893759",
                        "1921369924",
                        "1922092761", "1924288808", "1928658033", "1929846579", "1931553847", "1931601763",
                        "1932134329",
                        "1934640280", "1934829638", "1935072003", "1935228810", "1935723896", "1936323002",
                        "1937022329",
                        "1938051115", "1939097694", "1940093476", "1940617243", "1942796251", "1946579443",
                        "1947154271",
                        "1947968749", "1948558500", "1948694928", "1949090783", "1951010586", "1951014990",
                        "1951312764",
                        "1952298282", "1952579833", "1953019055", "1954210596", "1967964738", "1970890567",
                        "1973016171",
                        "1973581246", "1973985543", "1974805641", "1978941276", "1987410134", "1990908508",
                        "1958544647",
                        "1958544724", "1958544801", "1958544883", "1958544959", "1958545035", "1958545111",
                        "1958545187",
                        "1958545263", "1958545339", "1958545415", "1958545491", "1958545568", "1958545644",
                        "1958545720",
                        "1958545796", "1958545873", "1958545949", "1958546025", "1958546101", "1958546177",
                        "1958546253",
                        "1958546329", "1958546405", "1958546481", "1958546559", "1958652037", "1958652116",
                        "1958652196",
                        "1958652279", "1958652355", "1958652431", "1958652508", "1958652586", "1958652662",
                        "1958652738",
                        "1958652815", "1958652891", "1958652967", "1958653043", "1958653119", "1958653195",
                        "1958540052",
                        "1958540140", "1958540229", "1958540315", "1958540404", "1958540493", "1958540585",
                        "1958540669",
                        "1958540757", "1958540842", "1958540919", "1958540996", "1958541075", "1958541154",
                        "1958541232",
                        "1958541308", "1958541384", "1958541460", "1958541536", "1958653558", "1958655366",
                        "1958657289",
                        "1958657959", "1958666089", "1958666231", "1958666380", "1958666526", "1958666666",
                        "1958666846",
                        "1958667007", "1958667142", "1958667288", "1958667427", "1958667583", "1958667726",
                        "1958667878",
                        "1958668030", "1958668176", "1958668334", "1958668472", "1958668613", "1958668773",
                        "1958668927",
                        "1958669160", "1958669378", "1958669571", "1958669801", "1958670073", "1958670285",
                        "1958670481",
                        "1958670708", "1958670930", "1958549911", "1958550024", "1958550155", "1958550281",
                        "1958550412",
                        "1958550533", "1958550651", "1958550778", "1958550903", "1958551024", "1958551157",
                        "1958551290",
                        "1958551453", "1401791930", "1958900463", "1958896724", "1958847481", "1958799012",
                        "1958922952",
                        "1958979684", "1958718957", "1958828716", "1958977225", "1958742315", "1958987885",
                        "1958945736",
                        "1958886672", "1958901402", "1958972053", "1958784747", "1958831139", "1958707476",
                        "1958887583",
                        "1958872074", "1958854643", "1958768352", "1958877940", "1958974444", "1958773709",
                        "1958743268",
                        "1958974578", "1958739698", "1958988357", "1958997591", "1958753373", "1958925278",
                        "1958838239",
                        "1958737810", "1958932529", "1958964913", "1958924031", "1958767957", "1958747742",
                        "1958732848",
                        "1958912386", "1958808655", "1958820329", "1958877519", "1958805370", "1958790481",
                        "1958758492",
                        "1958847649", "1958788816", "1958740300", "1958845698", "1958855746", "1958769903",
                        "1958802227",
                        "1958864169", "1958823218", "1958868688", "1958787266", "1958919986", "1958997249",
                        "1958864847",
                        "1958730706", "1958958363", "1958856350", "1958838735", "1958953015", "1958776117",
                        "1958727821",
                        "1958771783", "1958881151", "1958755316", "1958879244", "1958740284", "1958814522",
                        "1958712387",
                        "1958870245", "1958944063", "1958903184", "1958857102", "1958971734", "1958707957",
                        "1958706012",
                        "1958966988", "1958859697", "1958987294", "1958718860", "1958900632", "1958835023",
                        "1958884066",
                        "1958996747", "1958815097", "1958912419", "1958949780", "1958820000", "1958752453",
                        "1958869754",
                        "1958926538", "1958786238", "1958793378", "1958842809", "1958747116", "1958840644",
                        "1958768987",
                        "1958917485", "1958711160", "1958997546", "1958835003", "1958804393", "1958779234",
                        "1958715031",
                        "1958985010", "1958879147", "1958970607", "1958989394", "1958708101", "1958735049",
                        "1958906138",
                        "1958957829", "1958914389", "1958817221", "1958804553", "1958902204", "1958937623",
                        "1958952108",
                        "1958766342", "1958891279", "1958904175", "1958993161", "1958745259", "1958795783",
                        "1958826667",
                        "1958976934", "1958968844", "1958937564", "1958968322", "1958907822", "1958923483",
                        "1958816963",
                        "1958901538", "1958832598", "1958802660", "1958787239", "1958905478", "1958776151",
                        "1958953306",
                        "1958739331", "1958994168", "1958760498", "1958760954", "1958793749", "1958819876",
                        "1958822193",
                        "1958807060", "1958876225", "1958735819", "1958742426", "1958977878", "1958820437",
                        "1958710971",
                        "1958992475", "1958827090", "1958720274", "1958995788", "1958988579", "1958833097",
                        "1958718120",
                        "1958947029", "1958921460", "1958927922", "1958901880", "1958792550", "1958840481",
                        "1958775902",
                        "1958954057", "1958750872", "1958732890", "1958944332", "1958973819", "1958799119",
                        "1958801399",
                        "1958998621", "1958987948", "1958907972", "1958717803", "1958860979", "1958881780",
                        "1958727421",
                        "1958833926", "1958801129", "1958706580", "1958857761", "1958985067", "1958768775",
                        "1958815094",
                        "1958777724", "1958738943", "1958962910", "1958981885", "1958839105", "1958948320",
                        "1401791927",
                        "1958876370", "1958859310", "1958724220", "1958922517", "1958831086", "1958758385",
                        "1958862354",
                        "1958816898", "1958924645", "1958710009", "1958899941", "1958710108", "1958788933",
                        "1958905703",
                        "1958782844", "1958895889", "1958706941", "1958994727", "1958906472", "1958782606",
                        "1958917086",
                        "1958885295", "1958790585", "1958941815", "1958872381", "1958885455", "1958760966",
                        "1958856398",
                        "1958890499", "1958758208", "1958982697", "1958808903", "1958780177", "1958881812",
                        "1958919021",
                        "1958768194", "1958941825", "1958871164", "1958911938", "1958738676", "1958717065",
                        "1958895586",
                        "1958971717", "1958905806", "1958940402", "1958826548", "1958947781", "1958947105",
                        "1958945878",
                        "1958977497", "1958890180", "1958814016", "1958904057", "1958987343", "1958862329",
                        "1958794115",
                        "1958944766", "1958717624", "1958841304", "1958802952", "1958753273", "1958833733",
                        "1958863819",
                        "1958763026", "1958919250", "1958751181", "1958715139", "1958869758", "1958737437",
                        "1958722821",
                        "1958775669", "1958779620", "1958922395", "1958849911", "1958774715", "1958979701",
                        "1958772094",
                        "1958713453", "1958953682", "1958894505", "1958840087", "1958832894", "1958733798",
                        "1958755523",
                        "1958726626", "1958745503", "1958912588", "1958758784", "1958740318", "1958780686",
                        "1958718083",
                        "1958825833", "1958968267", "1958928829", "1958973346", "1958969133", "1958872661",
                        "1958885049",
                        "1958832500", "1958897243", "1958762600", "1958959501", "1958737960", "1958810242",
                        "1958729440",
                        "1958893773", "1958764893", "1958969410", "1958928843", "1958886519", "1958784833",
                        "1958935690",
                        "1958985034", "1958969156", "1958747687", "1958938009", "1958954636", "1958876278",
                        "1958721008",
                        "1958776365", "1958938547", "1958846503", "1958794392", "1958719720", "1958770599",
                        "1958731806",
                        "1958761680", "1958991103", "1958714522", "1958943154", "1958953303", "1958942965",
                        "1958985969",
                        "1958847647", "1958868201", "1958752107", "1958771782", "1958793026", "1958953699",
                        "1958860164",
                        "1958904194", "1958781874", "1958747861", "1958708519", "1958969145", "1958780522",
                        "1958763270",
                        "1958871905", "1958744011", "1958712074", "1958947857", "1958762700", "1958923495",
                        "1958714045",
                        "1958770257", "1958927998", "1958783170", "1958755459", "1958878863", "1958832164",
                        "1958904444",
                        "1958726821", "1958966816", "1958797601", "1958983469", "1958846807", "1958840053",
                        "1958915476",
                        "1958808066", "1958888547", "1958738304", "1958890373", "1958741384", "1958957687",
                        "1958767247",
                        "1958771553", "1958997394", "1958910210", "1958864532", "1958936253", "1958779577",
                        "1958927775",
                        "1958991272", "1958869332", "1958916539", "1958875594", "1958854841", "1958757766",
                        "1958905844",
                        "1958845435", "1958994903", "1958886241", "1958969879", "1958994955", "1958730483",
                        "1958806818",
                        "1958817046", "1958860968", "1958860245", "1958832246", "1401792036", "1958986983",
                        "1958784903",
                        "1958953364", "1958987415", "1958772765", "1927347203", "1933869414", "1934301798",
                        "1936266441",
                        "1936434982", "1937044549", "1937849191", "1939097181", "1939639807", "1940094169",
                        "1946132482",
                        "1948275536", "1948750176", "1954076203", "1955385198", "1958708203", "1958708257",
                        "1958708929",
                        "1958714260", "1958715313", "1958715586", "1958715894", "1958716324", "1958716892",
                        "1958717058",
                        "1958717533", "1958717734", "1958718036", "1958723071", "1958724250", "1958726260",
                        "1958728133",
                        "1958728170", "1958728656", "1958730997", "1958731592", "1958733983", "1958734539",
                        "1958736721",
                        "1958736774", "1958738778", "1958740465", "1958740694", "1958741568", "1958742868",
                        "1958745289",
                        "1958745775", "1958748078", "1958748401", "1958749964", "1958752588", "1958754355",
                        "1958754446",
                        "1958754760", "1958755210", "1958757812", "1958758195", "1958758676", "1958758728",
                        "1958759318",
                        "1958759691", "1958759929", "1958760528", "1958763650", "1958764869", "1958768339",
                        "1958768742",
                        "1958770717", "1958771259", "1958772348", "1958772564", "1958772831", "1958773124",
                        "1958775547",
                        "1958776105", "1958777637", "1958777925", "1958778307", "1958779016", "1958779841",
                        "1958780224",
                        "1958784161", "1958786444", "1958788029", "1958788160", "1958790302", "1958792935",
                        "1958793476",
                        "1958796334", "1958797710", "1958798329", "1958798993", "1958805282", "1958806117",
                        "1958806497",
                        "1958807917", "1958809852", "1958816136", "1958823809", "1958825517", "1958828057",
                        "1958829550",
                        "1958829581", "1958830711", "1958831428", "1958834170", "1958836407", "1958838414",
                        "1958839066",
                        "1958843199", "1958843922", "1958844648", "1958845751", "1958851494", "1958853319",
                        "1958854514",
                        "1958854538", "1958857237", "1958860233", "1958865724", "1958866934", "1958867877",
                        "1958869710",
                        "1958871080", "1958873876", "1958877042", "1958880709", "1958881081", "1958881404",
                        "1958892405",
                        "1958893040", "1958893781", "1958894384", "1958895607", "1958896625", "1958896961",
                        "1958899698",
                        "1958899851", "1958900011", "1958900915", "1958901143", "1958901750", "1958901912",
                        "1958902099",
                        "1958904489", "1958906557", "1958908850", "1958909176", "1958909662", "1958909938",
                        "1958910608",
                        "1958910648", "1958911232", "1958911282", "1958914709", "1958915102", "1958916518",
                        "1958918630",
                        "1958920650", "1958920970", "1958921166", "1958922191", "1958923129", "1958924616",
                        "1958924766",
                        "1958926952", "1958927655", "1958929655", "1958930849", "1958932938", "1958933932",
                        "1958937145",
                        "1958939748", "1958940271", "1958941666", "1958942038", "1958943563", "1958944015",
                        "1958944949",
                        "1958945217", "1958946671", "1958949449", "1958952582", "1958953923", "1958957551",
                        "1958958235",
                        "1958960296", "1958963426", "1958965918", "1958969753", "1958971046", "1958971943",
                        "1958972589",
                        "1958974602", "1958975947", "1958976314", "1958977521", "1958980434", "1958980684",
                        "1958981122",
                        "1958981417", "1958981723", "1958982874", "1958983453", "1958985116", "1958986423",
                        "1958989828",
                        "1958994478", "1958995798", "1958998670", "1962760288", "1963115350", "1969372813",
                        "1972348099",
                        "1974685329", "1982763305", "1984696322", "1985254690", "1990530942", "1990626133",
                        "1958785142",
                        "1958812502", "1958854733", "1958858153", "1958881410", "1958902065", "1958933571",
                        "1958934021",
                        "1958954142", "1958968480", "1958970426", "1958977169", "1958983912", "1958990655",
                        "1958997398",
                        "1959004141", "1959010884", "1958916483", "1958923226", "1958929969", "1958936712",
                        "1958943455",
                        "1958950198", "1958956941", "1958963683", "1958745735", "1958762701", "1958885312",
                        "1958952093",
                        "1958856128", "1958965805", "1958816978", "1958918955", "1958801408", "1958915531",
                        "1958800415",
                        "1958824518", "1958924096", "1958771679", "1958793417"]
            mailcount = 0

            numbers = []
            options = uc.ChromeOptions()
            options.add_argument('--load-extension=D:\\autologinbot-master\\Urbanvpn')
            options.add_argument("--disable-renderer-backgrounding")
            options.add_argument("--disable-backgrounding-occluded-windows")
            capa = DesiredCapabilities.CHROME
            capa["pageLoadStrategy"] = "none"
            select = ['3', '57', '12', '26', '49', '29', '6', '23', '34', '28', '2', '18', '41', '55', '33', '24', '19']

            i = random.choice(select)
            while (1):
                try:
                    browser = uc.Chrome(options=options,version_main=108,use_subprocess=True,desired_capabilities=capa)
                    i = random.choice(select)
                    browser.get("chrome-extension://ecokmenakcanpnkbgifdiacoapdmhdjf/popup/index.html#/welcome-consent")

                    WebDriverWait(browser, 120).until(
                        EC.presence_of_element_located(
                            (By.CSS_SELECTOR,
                             "body > div > div > div.simple_layout__body > div > div > div > button.button_pink.agreement_agree"))).click()
                    WebDriverWait(browser, 20).until(
                        EC.presence_of_element_located((By.CSS_SELECTOR,
                                                        "body > div > div > div.main_layout__body > div.location-box > div > div:nth-child(1) > input"))).click()
                    time.sleep(2)
                    ph = WebDriverWait(browser, 20).until(
                        EC.presence_of_element_located(
                            (By.XPATH, "/html/body/div/div/div[3]/div[2]/div/div[2]/div/ul/li[" + str(i) + "]")))
                    browser.execute_script("arguments[0].scrollIntoView(true);", ph);
                    ph.click()
                    time.sleep(2)
                    print('country is: '+str(i))
                    i=0
                    break
                except:
                    print(a)
                    pass


            while (1):
               lastalert=False
               if(i!=0):
                   i = random.choice(select)
                   browser.get("chrome-extension://ecokmenakcanpnkbgifdiacoapdmhdjf/popup/index.html#/welcome-consent")
                   try:

                       WebDriverWait(browser, 10).until(
                           EC.presence_of_element_located(
                               (By.CSS_SELECTOR,
                                "body > div > div > div.simple_layout__body > div > div > div > button.button_pink.agreement_agree"))).click()
                   except:
                       pass
                   try:

                       WebDriverWait(browser, 10).until(
                           EC.presence_of_element_located(
                               (By.CSS_SELECTOR,
                                "body > div > div > div.simple_layout__header > div"))).click()
                   except:
                       pass

                   WebDriverWait(browser, 20).until(
                       EC.presence_of_element_located((By.CSS_SELECTOR,
                                                       "body > div > div > div.main_layout__body > div.location-box > div > div:nth-child(1) > input"))).click()
                   time.sleep(2)
                   ph = WebDriverWait(browser, 20).until(
                       EC.presence_of_element_located(
                           (By.XPATH, "/html/body/div/div/div[3]/div[2]/div/div[2]/div/ul/li[" + str(i) + "]")))
                   browser.execute_script("arguments[0].scrollIntoView(true);", ph);
                   ph.click()
                   print('country is: ' + str(i))
               i = random.choice(select)









               while(1):
                if(lastalert==True):

                    break





                while (1):
                    try:

                        browser.get((url))

                        break
                    except:


                        pass

                print('making acc')
                a = Account()
                print(a.address, a.)
                # See the details of the account




                try:





                    phonee = WebDriverWait(browser, 20).until(
                        EC.presence_of_element_located((By.CSS_SELECTOR, '#username')))
                    phonee.send_keys(a.address)


                    time.sleep(0.5)

                    phonee = WebDriverWait(browser, 60).until(
                        EC.presence_of_element_located((By.CSS_SELECTOR,
                                                        '#root > div > div > div > div.app > div.access-container.bui_font_body > div > div > div > div > div > div > form > div:nth-child(3) > button')))
                    phonee.click()
                    time.sleep(0.5)

                    usernap = WebDriverWait(browser, 120).until(
                        EC.presence_of_element_located((By.CSS_SELECTOR, '#new_')))

                    usernap.send_keys("")
                    time.sleep(0.5)


                    usernap = WebDriverWait(browser, 120).until(
                        EC.presence_of_element_located((By.CSS_SELECTOR, '#confirmed_')))
                    usernap.send_keys("")
                    time.sleep(0.8)
                    ur=browser.current_url

                    usernap = WebDriverWait(browser, 120).until(
                        EC.presence_of_element_located((By.CSS_SELECTOR,
                                                        '#root > div > div > div > div.app > div.access-container.bui_font_body > div > div > div > div > div > div > form > button')))
                    usernap.click()
                    g=0

                    while(1):

                        x=browser.current_url
                        g+=1


                        if(x!=ur):
                            time.sleep(3)
                            break
                        if(g>=5000):
                            a.destroy()
                            lastalert = True
                            browser.delete_all_cookies()
                            browser.refresh()
                            break

                    if(g>=5000):
                        a.destroy()
                        lastalert = True
                        browser.delete_all_cookies()
                        browser.refresh()
                        break

                    browser.get('https://account.booking.com/mysettings/personal')
                    usernap = WebDriverWait(browser, 120).until(
                        EC.presence_of_element_located((By.XPATH, '/html/body/div[1]/div/div/div[1]/div/div/div/div/div[2]/div[3]/div/div[2]/div/div/div[2]/div/div[2]/span/button')))
                    usernap.click()
                    time.sleep(2)
                    try:
                        WebDriverWait(browser, 5).until(EC.alert_is_present(),
                                                        'Timed out waiting for PA creation ' +
                                                        'confirmation popup to appear.')
                        alert = browser.switch_to.alert
                        alert.accept()
                        print("alertttt")
                    except:
                        print("passing")
                        pass



                except  Exception as e:
                    print('yo')
                    a.destroy()
                    lastalert=True
                    browser.delete_all_cookies()
                    browser.refresh()


                    break



                while(1):


                 time.sleep(3)

                 emails=a.get_message(latest=0)
                 print(emails)
                 print(len(emails))
                 if(len(emails)>20):
                     print('email recieved')
                     break









                otp1 = re.findall("(?<=target\": \")(.*)(?=\",)", str(emails))
                print(otp1)
                browser.get(str(otp1[0]))
                time.sleep(3)
                #o=str(otp1[0])
                #print(o)
                #msg=ft.getMessage(o)
                #print(msg)

                browser.get('https://account.booking.com/mysettings/personal')


                while (1):
                   if (lastalert == True):
                       a.destroy()

                       break
                   try:


                    time.sleep(0.5)
                    usernap = WebDriverWait(browser, 120).until(
                        EC.presence_of_element_located((By.CSS_SELECTOR,
                                                        '#root > div > div > div.my-settings-app-container > div > div > div > div > div.my-settings-edit-table.bui-f-font-featured > div:nth-child(4) > div > div.settings-row__edit-col > button')))
                    usernap.click()
                    time.sleep(0.8)

                    #phone = WebDriverWait(browser, 20).until(
                     #   EC.presence_of_element_located((By.CSS_SELECTOR, '#__bui-18')))
                    #phone.click()

                   # phone = WebDriverWait(browser, 20).until(
                   #     EC.presence_of_element_located((By.CSS_SELECTOR, '#__bui-19 > option:nth-child(169)')))
                   # phone.click()
                    try:
                        phonesp = WebDriverWait(browser, 1).until(
                            EC.presence_of_element_located((By.XPATH,
                                                            '/html/body/div[3]/div[2]/div[1]/div/div[2]/div/button[2]')))
                        phonesp.click()

                    except:
                        pass




                    time.sleep(0.5)
                    phonesp = WebDriverWait(browser, 10).until(
                        EC.presence_of_element_located((By.XPATH,
                                                        '//div[@class="sOewt4Y1yBOPAIUGcJwH wkTNdQjAfRVbKvFBiR1T"]')))
                    phonesp.click()
                    phonesp = WebDriverWait(browser, 10).until(
                        EC.presence_of_element_located((By.XPATH,
                                                        '//option[@value="bd"]')))
                    phonesp.click()

                    phonesp = WebDriverWait(browser, 10).until(
                            EC.presence_of_element_located((By.NAME,
                                                            'number')))
                    phonesp.send_keys(fnumbers[recount])
                    time.sleep(0.3)
                    phonesp = WebDriverWait(browser, 10).until(
                       EC.presence_of_element_located((By.XPATH,
                                                       '//button[@data-test-id="mysettings-btn-save"]')))
                    phonesp.click()
                    try:
                        WebDriverWait(browser, 1).until(EC.alert_is_present(),
                                                        'Timed out waiting for PA creation ' +
                                                        'confirmation popup to appear.')
                        alert = browser.switch_to.alert
                        alert.accept()
                        print("alertttt")
                        a.destroy()
                        browser.delete_all_cookies()

                        if (recount < (len(fnumbers) - 1)):
                            recount = recount + 1
                        else:
                            total += 1
                            print("Total: ", total)
                            recount = 0
                        lastalert = True
                        break
                    except:
                        pass






                   except Exception as e:

                       try:
                           WebDriverWait(browser, 5).until(EC.alert_is_present(),
                                                           'Timed out waiting for PA creation ' +
                                                           'confirmation popup to appear.')
                           alert = browser.switch_to.alert
                           alert.accept()
                           print("alertttt")
                           a.destroy()
                           browser.delete_all_cookies()

                           if (recount < (len(fnumbers) - 1)):
                               recount = recount + 1
                           else:
                               total += 1
                               print("Total: ", total)
                               recount = 0
                           lastalert = True
                           break

                       except:
                           lastalert = True
                           a.destroy()
                           browser.delete_all_cookies()
                           browser.refresh()

                           break




                   #if (total >= 50):
                    #$   print("Finished sending")
                     #  browser.quit()


                   count = count + 1
                   if (recount < (len(fnumbers) - 1)):
                        recount = recount + 1
                   else:
                    total += 1
                    print("Total: ", total)
                    recount = 0
                   print(count)
                   time.sleep(0.6)
                   while(1):
                    try:
                     browser.refresh()
                     break
                    except:
                        pass

     
      except:
          print(a)
     
     
  
